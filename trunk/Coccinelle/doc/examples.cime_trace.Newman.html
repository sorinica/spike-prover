<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>examples.cime_trace.Newman</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library examples.cime_trace.Newman</h1>

<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">weaved_relation</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">closure</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">terminaison</span>.<br/>

<br/>
<span class="id" type="keyword">Section</span> <span class="id" type="var">Newman</span>.<br/>

<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">A</span> : <span class="id" type="keyword">Type</span>.<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">R</span> : <span class="id" type="var">A</span> -&gt; <span class="id" type="var">A</span> -&gt; <span class="id" type="keyword">Prop</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">coherence</span> (<span class="id" type="var">x</span> <span class="id" type="var">y</span>:A) := <br/>
&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">z</span>, <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span>/\ <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">y</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <span class="id" type="var">coherence_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>:A, <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">y</span> -&gt; <span class="id" type="var">coherence</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> <span class="id" type="var">Hzx</span> <span class="id" type="var">Hzy</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">z</span>;<span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A very simple case of coherence : 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">Rstar_coherence</span> : <br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>:A, <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">coherence</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">coherence_intro</span> <span class="id" type="keyword">with</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">refine</span> (<span class="id" type="var">star_refl</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">exact</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
coherence is symmetric 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">coherence_sym</span> : <br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>:A, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">coherence</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">z</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">z</span>;<span class="id" type="tactic">split</span>;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">confluence</span> (<span class="id" type="var">x</span>:A) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>:A, <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="var">local_confluence</span> (<span class="id" type="var">x</span>:A) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>:A, <span class="id" type="var">R</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Section</span> <span class="id" type="var">Newman_section</span>.<br/>

<br/>
</div>

<div class="doc">
The general hypotheses of the theorem 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">Hyp1</span> : <span class="id" type="var">well_founded</span>  <span class="id" type="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">Hyp2</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>:A, <span class="id" type="var">local_confluence</span> <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
The induction hypothesis 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Section</span> <span class="id" type="var">Induct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <span class="id" type="var">x</span> : <span class="id" type="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">hyp_ind</span> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">u</span>:A, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">R</span> <span class="id" type="var">u</span> <span class="id" type="var">x</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">confluence</span> <span class="id" type="var">u</span>.<br/>

<br/>
</div>

<div class="doc">
Confluence in <span class="inlinecode"><span class="id" type="var">x</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Variables</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> : <span class="id" type="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">h1</span> : <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">h2</span> : <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
particular case <span class="inlinecode"><span class="id" type="var">x</span>-&gt;u</span> and <span class="inlinecode"><span class="id" type="var">u</span>-&gt;*y</span>   
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Section</span> <span class="id" type="var">Newman_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Variable</span> <span class="id" type="var">u</span> : <span class="id" type="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">t1</span> : <span class="id" type="var">R</span> <span class="id" type="var">u</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Hypothesis</span> <span class="id" type="var">t2</span> : <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">y</span> <span class="id" type="var">u</span>.<br/>

<br/>
</div>

<div class="doc">
In the usual diagram, we assume also <span class="inlinecode"><span class="id" type="var">x</span>-&gt;v</span> and <span class="inlinecode"><span class="id" type="var">v</span>-&gt;*z</span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <span class="id" type="var">Diagram</span> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">v</span>:A) (<span class="id" type="var">u1</span>:R <span class="id" type="var">v</span> <span class="id" type="var">x</span>) (<span class="id" type="var">u2</span>:star <span class="id" type="var">_</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">v</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">v</span> <span class="id" type="var">u1</span> <span class="id" type="var">u2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>:=Hyp2 <span class="id" type="var">x</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">t1</span> <span class="id" type="var">u1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">w</span> [<span class="id" type="var">s1</span> <span class="id" type="var">s2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span>:=(hyp_ind <span class="id" type="var">u</span> <span class="id" type="var">t1</span> <span class="id" type="var">y</span> <span class="id" type="var">w</span> <span class="id" type="var">t2</span> <span class="id" type="var">s1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H'</span> <span class="id" type="keyword">as</span>  [<span class="id" type="var">a</span> [<span class="id" type="var">v1</span> <span class="id" type="var">v2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H''</span>:=(hyp_ind <span class="id" type="var">v</span> <span class="id" type="var">u1</span> <span class="id" type="var">a</span> <span class="id" type="var">z</span> (<span class="id" type="var">star_trans</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">a</span> <span class="id" type="var">w</span> <span class="id" type="var">v</span> <span class="id" type="var">v2</span> <span class="id" type="var">s2</span>) <span class="id" type="var">u2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H''</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">b</span> [<span class="id" type="var">w1</span> <span class="id" type="var">w2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">coherence_intro</span> <span class="id" type="keyword">with</span> <span class="id" type="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_trans</span> <span class="id" type="keyword">with</span> <span class="id" type="var">a</span>;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Qed</span>.<br/>

<br/>

<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <span class="id" type="var">caseRxy</span> : <span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">y</span>;<span class="id" type="tactic">split</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">star_refl</span>. <span class="id" type="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Diagram</span> <span class="id" type="keyword">with</span> <span class="id" type="var">y0</span>;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">End</span> <span class="id" type="var">Newman_</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <span class="id" type="var">Ind_proof</span> : <span class="id" type="var">coherence</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">coherence_sym</span>;<span class="id" type="tactic">apply</span> <span class="id" type="var">Rstar_coherence</span>;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">caseRxy</span> <span class="id" type="keyword">with</span> <span class="id" type="var">y0</span>;<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">End</span> <span class="id" type="var">Induct</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Theorem</span> <span class="id" type="var">Newman</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>:A, <span class="id" type="var">confluence</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">x</span>;<span class="id" type="tactic">pattern</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">well_founded_ind</span> <span class="id" type="keyword">with</span> (1:=Hyp1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">x</span>;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">IHx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> <span class="id" type="var">Hy</span> <span class="id" type="var">Hz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">Ind_proof</span> <span class="id" type="keyword">with</span> (1:=IHx);<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">Newman_section</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">Newman</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">equational_theory_spec</span>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <span class="id" type="var">Confluence</span>(<span class="id" type="var">Eqt</span>:EqTh).<br/>
<span class="id" type="keyword">Import</span> <span class="id" type="var">Eqt</span>.<br/>
<span class="id" type="keyword">Import</span> <span class="id" type="var">T</span>.<br/>
<span class="id" type="keyword">Section</span> <span class="id" type="var">Rew</span>.<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">R</span> : <span class="id" type="var">term</span> -&gt; <span class="id" type="var">term</span> -&gt; <span class="id" type="keyword">Prop</span>.<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">wf_R</span> : <span class="id" type="var">well_founded</span> (<span class="id" type="var">Eqt.one_step</span> <span class="id" type="var">R</span>).<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">no_need_of_instance</span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">t2</span> <span class="id" type="var">t1</span> : <span class="id" type="var">term</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">axiom</span> <span class="id" type="var">R</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> -&gt; <span class="id" type="var">R</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>.<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">R_non_var</span> : <br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">y</span> <span class="id" type="var">v</span>, ~ <span class="id" type="var">R</span> <span class="id" type="var">y</span> (<span class="id" type="var">Var</span> <span class="id" type="var">v</span>).<br/>

<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="var">head_down_confl</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">one_step</span> <span class="id" type="var">R</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> -&gt; <span class="id" type="var">R</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;<span class="id" type="var">coherence</span> <span class="id" type="var">term</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>) <span class="id" type="var">y</span> <span class="id" type="var">z</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">star_list</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">f</span> <span class="id" type="var">l</span> <span class="id" type="var">l'</span>, <span class="id" type="var">star</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step_list</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>)) <span class="id" type="var">l'</span> <span class="id" type="var">l</span> -&gt; <br/>
&nbsp;&nbsp;<span class="id" type="var">star</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>) (<span class="id" type="var">Term</span> <span class="id" type="var">f</span> <span class="id" type="var">l'</span>) (<span class="id" type="var">Term</span> <span class="id" type="var">f</span> <span class="id" type="var">l</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">f</span> <span class="id" type="var">l</span> <span class="id" type="var">l'</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_trans</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">Term</span> <span class="id" type="var">f</span> <span class="id" type="var">y</span>);<span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>. <span class="id" type="tactic">auto</span>. <span class="id" type="var">constructor</span> 2. <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">List</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">star_cons</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">l</span> <span class="id" type="var">t'</span> <span class="id" type="var">l'</span>, <br/>
&nbsp;&nbsp;<span class="id" type="var">star</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>) <span class="id" type="var">t'</span> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">star</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step_list</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>)) <span class="id" type="var">l'</span> <span class="id" type="var">l</span> -&gt; <br/>
&nbsp;&nbsp;<span class="id" type="var">star</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step_list</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>)) (<span class="id" type="var">t'</span>::l') (<span class="id" type="var">t</span>::l).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">l</span> <span class="id" type="var">t'</span> <span class="id" type="var">l'</span> <span class="id" type="var">H</span> <span class="id" type="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_trans</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">t</span>::l').<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H0</span>;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_trans</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">y</span>::l').<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>;<span class="id" type="var">constructor</span>;<span class="id" type="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">induction</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_trans</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">t</span>::y).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>;<span class="id" type="var">constructor</span>;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="var">confluence</span> :<br/>
<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">confluence</span> <span class="id" type="var">_</span> (<span class="id" type="var">Eqt.one_step</span> <span class="id" type="var">R</span>) <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">Newman</span>.<br/>
<span class="id" type="tactic">exact</span> <span class="id" type="var">wf_R</span>.<br/>

<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">x</span> <span class="id" type="keyword">using</span> <span class="id" type="var">term_rec4</span> <br/>
&nbsp;&nbsp;<span class="id" type="keyword">with</span> (<span class="id" type="var">Pl</span>:=fun <span class="id" type="var">lx</span> =&gt; <span class="id" type="var">local_confluence</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step_list</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>)) <span class="id" type="var">lx</span>).<br/>

<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> <span class="id" type="var">H</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">subst</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">no_need_of_instance</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">elim</span> (<span class="id" type="var">R_non_var</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">H1</span>).<br/>

<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> <span class="id" type="var">Hy</span> <span class="id" type="var">Hz</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">Hy</span>;<span class="id" type="tactic">subst</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">no_need_of_instance</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">head_down_confl</span> <span class="id" type="keyword">with</span> (1:=Hz) (2:=H).<br/>

<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">Hz</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">Hz</span>;<span class="id" type="tactic">subst</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">no_need_of_instance</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>

<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">coherence_sym</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">head_down_confl</span> <span class="id" type="keyword">with</span> (1:=Hy) (2:=H).<br/>

<br/>
<span class="id" type="tactic">destruct</span> (<span class="id" type="var">IHx</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">lz</span> [<span class="id" type="var">Hlz1</span> <span class="id" type="var">Hlz2</span>]].<br/>
<span class="id" type="var">exists</span> (<span class="id" type="var">Term</span> <span class="id" type="var">f</span> <span class="id" type="var">lz</span>);<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">star_list</span>;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">star_list</span>;<span class="id" type="tactic">assumption</span>.<br/>

<br/>

<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">induction</span> <span class="id" type="var">l</span>.<br/>

<br/>
<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">red</span>;<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>.<br/>

<br/>
<span class="id" type="tactic">intros</span>;<span class="id" type="tactic">red</span>;<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">H0</span> <span class="id" type="var">H1</span>;<span class="id" type="tactic">subst</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">coherence</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>) <span class="id" type="var">t0</span> <span class="id" type="var">t1</span>).<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> <span class="id" type="var">a</span>;<span class="id" type="tactic">simpl</span>;<span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> [<span class="id" type="var">h1</span> <span class="id" type="var">h2</span>]].<br/>
<span class="id" type="var">exists</span> (<span class="id" type="var">t</span>::l);<span class="id" type="tactic">split</span>;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_cons</span>;<br/>
<span class="id" type="tactic">try</span> <span class="id" type="var">constructor</span>;<span class="id" type="tactic">auto</span>.<br/>

<br/>
<span class="id" type="var">exists</span> (<span class="id" type="var">t1</span>::l1);<span class="id" type="tactic">split</span>;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <span class="id" type="var">star_cons</span>;<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>;<span class="id" type="var">constructor</span>;<span class="id" type="tactic">auto</span>.<br/>

<br/>
<span class="id" type="var">exists</span> (<span class="id" type="var">t1</span>::l1);<span class="id" type="tactic">split</span>;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <span class="id" type="var">star_cons</span>;<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>;<span class="id" type="var">constructor</span>;<span class="id" type="tactic">auto</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">coherence</span> <span class="id" type="var">_</span> (<span class="id" type="var">one_step_list</span> (<span class="id" type="var">one_step</span> <span class="id" type="var">R</span>)) <span class="id" type="var">l1</span> <span class="id" type="var">l0</span>).<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHl</span>;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">lz</span> [<span class="id" type="var">h1</span> <span class="id" type="var">h2</span>]].<br/>
<span class="id" type="var">exists</span> (<span class="id" type="var">a</span>::lz);<span class="id" type="tactic">split</span>;<span class="id" type="tactic">apply</span> <span class="id" type="var">star_cons</span>;<span class="id" type="tactic">auto</span>;<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">Rew</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="var">List</span>.<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">reduce_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?Term ?f ?l =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">l'</span>:= <span class="id" type="var">reduce_list</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">l</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l'</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">l</span> =&gt; <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(Term <span class="id" type="var">f</span> <span class="id" type="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:t<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
<span class="id" type="keyword">with</span> <span class="id" type="var">reduce_list</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">l</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">l</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">nil</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:l<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?t::?l =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t'</span> := <span class="id" type="var">reduce_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t'</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">t</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">l'</span> := <span class="id" type="var">reduce_list</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">l</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(t::l')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(t'::l)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">prove_red_star</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">no_need_of_instance'</span>  := <br/>
&nbsp;&nbsp;<span class="id" type="var">constructor</span> || <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">goal</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" type="var">star</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ?t =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t'</span> := <span class="id" type="var">reduce_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">transitivity</span> <span class="id" type="var">t'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" type="var">prove_red_star</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">no_need_of_instance'</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">complete</span> (<span class="id" type="tactic">apply</span> <span class="id" type="var">star_R</span>;<span class="id" type="var">constructor</span> 1;<span class="id" type="tactic">apply</span> <span class="id" type="var">no_need_of_instance'</span>;<span class="id" type="var">constructor</span>)  || <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span> ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">apply</span> <span class="id" type="var">star_list</span>;<span class="id" type="tactic">repeat</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">star_cons</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">normalize_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t'</span> := <span class="id" type="var">reduce_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t'</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">t</span> =&gt; <span class="id" type="var">constr</span>:t<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">normalize_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">prove_critical_pair</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">no_need_of_instance'</span> := <br/>
<span class="id" type="keyword">match</span> <span class="id" type="var">goal</span> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;| <span class="id" type="var">H</span>: ?axiom <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1<br/>
&nbsp;&nbsp;| <span class="id" type="var">H</span>: <span class="id" type="var">_</span> = <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1<br/>
&nbsp;&nbsp;| |- <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ?t <span class="id" type="var">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e</span> := <span class="id" type="var">normalize_term</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">t</span> <span class="id" type="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">e</span>;<span class="id" type="tactic">split</span>;<span class="id" type="var">prove_red_star</span> <span class="id" type="var">head_reduction</span> <span class="id" type="var">no_need_of_instance'</span><br/>
<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="var">Confluence</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://www.lix.polytechnique.fr/coq/">coqdoc</a>
</div>

</div>

</body>
</html>